@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Add New WorkoutPlan";
}

<h1>Workout Plan</h1>
<h4>Date: <input type="date" id="date" value="@DateTime.Today.ToString("yyyy-MM-dd")" onchange="setPlanDate();" /></h4>
<h4 id="planDateTag"></h4>

<script type="text/javascript">
    
    // Function will dynamically update planDateTag header tags with week and day number
    function setPlanDate() {
        /*
        * ASSUMPTIONS:
        * 
        *   1. Week begins on the Monday and ends Sunday. Ie Mon = Day1, Sun = Day7
        *   2. Season begins 3rd week of September
        * 
        */

        var seasonStartDate = new Date('@ViewBag.SeasonStartDate[0]', '@ViewBag.SeasonStartDate[1]', '@ViewBag.SeasonStartDate[2]', 0, 0, 0,0);
        var tempDate = new Date(document.getElementById("date").value);
        tempDate.setDate(tempDate.getDate() + 1);

        var workoutDate = new Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());

        var totalDays = Math.ceil(((((workoutDate - seasonStartDate.getTime()) / 1000) / 60) / 60) / 24); //Rounds up after dividing to get number of days from milliseconds
        var totalWeeks = (totalDays - (totalDays % 7)) / 7;

        var weekNumber = totalWeeks + 1;
        var dayNumber = (totalDays % 7 ) + 1;

        document.getElementById("planDateTag").innerHTML = "Week " + weekNumber + ",  Day " + dayNumber;
    }

    // set planDateTag onLoad
    window.onload = setPlanDate();

</script>

<!-- TODO: insert workout sets.
    
-->